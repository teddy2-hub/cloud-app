<div class="row my-5 justify-content-center">
    <div class="col-8 col-md-6 col-lg-4">
        <h3 class="text-center mb-5">íšŒì›ê°€ì…</h3>
        <form id="join" name="frm" method="post">
            <div class="input-group my-2">
                <div class="input-group-text">ì´ ë©” ì¼</div>
                <input class="form-control" id="email" name="email" value="tomato@hot.com" />
            </div>
            <div class="input-group">
                <div class="input-group-text">ë¹„ë°€ë²ˆí˜¸</div>
                <input class="form-control" id="password" name="password" type="password" value="12345678" />
            </div>
            <div class="my-3">
                <button class="btn btn-success w-100">íšŒì›ê°€ì…</button>
            </div>
            <div class="text-end mt-3"><a href="/login">ë¡œê·¸ì¸</a></div>
        </form>
    </div>
</div>
<script type="module">
    import { app } from '/javascripts/firebase.js'
    import { getAuth, createUserWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js'
    const auth = getAuth(app)
    console.log(auth);
    const join = document.querySelector("#join")
    //button ë””í´íŠ¸: submit -> êµ³ì´ clickì´ë²¤íŠ¸ë¡œ ì²˜ë¦¬í•˜ì§€ ì•Šì•„ë„ ì „ì†¡ëŒ
    //<input type='button'>
    //submitì´ìŠˆê°€ ìˆì–´ì„œ ì„œë²„ë¡œ ì „ì†¡ í›„ì— ìƒˆë¡œê³ ì¹¨ì´ ë°œë™í•¨. - ì´ë²¤íŠ¸ ì „ì´ê°€ ë°œìƒí•´ì„œ
    //event.preventDefault() ë°˜ë“œì‹œ í˜¸ì¶œí•˜ì—¬ ì´ë²¤íŠ¸ ì „ì´ë¥¼ ë§‰ì€ ê²ƒ
    join.addEventListener('submit', function (event) {
        event.preventDefault()
        console.log('íšŒì›ê°€ì… í˜¸ì¶œ ì„±ê³µ');
        // const u_email = document.querySelector("#email") HTMLElement
        const u_email = document.querySelector("#email").value
        const u_pw = document.querySelector("#password").value
        console.log(`u_email:${u_email}, u_pw:${u_pw}`);
        createUserWithEmailAndPassword(auth, u_email, u_pw)
            .then((data) => {
                //íšŒì›ê°€ì… ì„±ê³µì‹œ í•¨ìˆ˜ íŒŒë¼ì´í„° ì¸ì¦ê°ì²´ì™€ ì´ë©”ì¼, ë¹„ë²ˆì„ ë¹„êµ -> ì¼ì¹˜ ì‹œ ì‘ë‹µìœ¼ë¡œ ë©”ì„¸ì§€ response
                //=ì½œë°±í•¨ìˆ˜
                console.log(data);
                //íšŒì›ê°€ì…ì„±ê³µ ì‹œ ë¡œê·¸ì¸í™”ë©´ìœ¼ë¡œ
                // location.href = "/login"  //get, post ì°¨ì´ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ ì£¼ì„ì²˜ë¦¬í•¨
            })//end of EmailAndPassword
            .catch((error) => {
                console.log('ğŸ”¥ Firebase Error:', error.code, error.message);
                alert(`ì—ëŸ¬ì½”ë“œ: ${error.code}\në©”ì‹œì§€: ${error.message}`);
            });
    });
</script>